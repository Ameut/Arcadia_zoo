{% load static %}
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Site du zoo Arcadia" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      rel="stylesheet"
      href="{% static 'liste/style.css' %}"
    />
    <title>Parc zoologique Arcadia</title>
  </head>

  <body>
    <div class="main-content">
      <div class="h1-container">
        <h1>Zoo Arcadia</h1>
      </div>
      <header>
        <a class="navbar-brand" href="/">
          <img
            src="{% static 'liste/images/logo.png' %}"
            alt="Logo Zoo Arcadia"
            style="height: 60px"
          />
        </a>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
          <a class="navbar-brand" href="/">Accueil</a>
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarNav"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item active">
                <a class="nav-link" href="/habitat">Habitats</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/service">Service & Horraire</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/contact">Contact</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/submit_avis">Soumettre un avis</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/rapport">Rapport vétérinaire</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/admin">Admin</a>
              </li>
            </ul>
          </div>
        </nav>
      </header>

      <!-- Main Content -->
      <main>
        <h2>Nos habitats</h2>
        <p>
          Voici la liste de nos habitats et les animaux qui y vivent. Cliquez
          sur votre animal favori, survolez le prénom pour voir son image.
        </p>
        <table>
          <thead>
            <tr>
              <th>Nom</th>
              <th>Description</th>
              <th>Animaux</th>
              <th>Image</th>
            </tr>
          </thead>
          <tbody>
            {% for habitat in habitats %}
            <tr>
              <td>{{ habitat.nom }}</td>
              <td>{{ habitat.description }}</td>
              <td>
                {% if habitat.animaux.exists %}
                <ul>
                  {% for animal in habitat.animaux.all %}
                  <li>
                    <span
                      class="animal-name"
                      onmouseover="showImage(this)"
                      onmouseout="hideImage(this)"
                      onclick="incrementClick({{ animal.id }})"
                    >
                      {{ animal.prenom }} - {{ animal.race.label }} - Clics :
                      <span id="clicks-count-{{ animal.id }}"
                        >{{ animal.clics }}</span
                      >
                    </span>
                    <div class="animal-image" style="display: none">
                      <img
                        src="{{ animal.image.url }}"
                        alt="Image de {{ animal.prenom }}"
                        style="max-width: 500px; height: auto"
                      />
                    </div>
                  </li>
                  {% endfor %}
                </ul>
                {% else %}
                <p>Aucun animal dans cet habitat.</p>
                {% endif %}
              </td>
              <td>
                {% if habitat.images.exists %}
                <div class="image-container">
                  <img
                    src="{{ habitat.images.first.image_data.url }}"
                    alt="Image of {{ habitat.nom }}"
                    class="clickable-image"
                    onclick="openImage(this, '{{ habitat.nom }}')"
                    data-habitat-name="{{ habitat.nom }}"
                  />
                  <div class="habitat-title">{{ habitat.nom }}</div>
                </div>
                {% else %}
                <p>Pas d'image disponible.</p>
                {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </main>

      <!-- Footer -->
      <footer class="footer-dark">
        <div class="container-media">
          <div class="row">
            <div class="col-sm-6 col-md-3 item">
              <h3>Services</h3>
              <ul>
                <li><a href="#">Cafétéria</a></li>
                <li><a href="#">Hotel</a></li>
                <li><a href="#">Transport</a></li>
              </ul>
            </div>
            <div class="col-sm-6 col-md-3 item">
              <h3>A propos</h3>
              <ul>
                <li><a href="#">Véterinaire</a></li>
                <li><a href="#">Nos équipes</a></li>
                <li><a href="#">Nos animaux</a></li>
              </ul>
            </div>
            <div class="col-md-6 item text">
              <h3>Zoo Arcadia</h3>
              <p>
                Praesent sed lobortis mi. Suspendisse vel placerat ligula.
                Vivamus ac sem lacus. Ut vehicula rhoncus elementum. Etiam quis
                tristique lectus. Aliquam in arcu eget velit pulvinar dictum vel
                in justo.
              </p>
            </div>
            <div class="col item social">
              <a href="#"><i class="icon ion-social-facebook"></i></a>
              <a href="#"><i class="icon ion-social-instagram"></i></a>
            </div>
          </div>
          <p class="copyright">Zoo Arcadia ©2024</p>
        </div>
      </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'liste/js/rolever.js' %}"></script>
    <script src="{% static 'liste/js/img_habitat.js' %}"></script>
  </body>
</html>
